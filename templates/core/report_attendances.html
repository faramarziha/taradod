{% extends "core/base_management.html" %}
{% load jformat %}
{% block title %}گزارش تردد{% endblock %}
{% block management_content %}
<h2 class="page-title"><i class="fas fa-clock"></i> گزارش ترددهای پرسنل</h2>
<form method="get" class="card page page-sm form-grid" style="margin-bottom:1rem;">
  {% for field in form %}
  <div class="form-group">{{ field.label_tag }}{{ field }}</div>
  {% endfor %}
  <div class="profile-actions"><button type="submit" class="btn">نمایش</button></div>
</form>
<div class="table-responsive">
<table class="management-table">
  <thead><tr><th>کاربر</th><th>تاریخ</th><th>ساعت</th><th>نوع</th></tr></thead>
  <tbody>
    {% for log in logs %}
    <tr>
      <td>{{ log.user.get_full_name }} - {{ log.user.personnel_code }}</td>
      <td>{{ log.timestamp|jformat:"%Y/%m/%d" }}</td>
      <td>{{ log.timestamp|time:"H:i" }}</td>
      <td>{% if log.log_type == 'in' %}ورود{% else %}خروج{% endif %}</td>
    </tr>
    {% empty %}
    <tr><td colspan="4">موردی یافت نشد.</td></tr>
    {% endfor %}
  </tbody>
</table>
</div>
{% endblock %}
{% block extra_js %}{{ form.media }}{% endblock %}
