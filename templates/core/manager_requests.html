{% extends "core/base_management.html" %}
{% load jformat %}
{% block title %}درخواست‌ها{% endblock %}
{% block management_content %}
<h2 class="page-title"><i class="fas fa-list"></i> درخواست‌ها</h2>
<p class="card">در ادامه فهرست آخرین درخواست‌های ویرایش و مرخصی را مشاهده می‌کنید.</p>
<h3 style="margin-top:1rem;">درخواست‌های ویرایش</h3>
<div class="request-cards">
  {% for r in pending_edits %}
  <div class="request-card fade-in">
    <div class="row"><span class="label">کاربر:</span><span>{{ r.user.get_full_name }} - {{ r.user.personnel_code }}</span></div>
    <div class="row"><span class="label">زمان:</span><span>{{ r.timestamp|jformat:"%Y/%m/%d %H:%M" }}</span></div>
  </div>
  {% empty %}<div class="alert-success">درخواستی نیست.</div>{% endfor %}
</div>
<h3 style="margin-top:1rem;">درخواست‌های مرخصی</h3>
<div class="request-cards">
  {% for r in pending_leaves %}
  <div class="request-card fade-in">
    <div class="row"><span class="label">کاربر:</span><span>{{ r.user.get_full_name }} - {{ r.user.personnel_code }}</span></div>
    <div class="row"><span class="label">از:</span><span>{{ r.start_date|jformat:"%Y/%m/%d" }}</span></div>
    <div class="row"><span class="label">تا:</span><span>{{ r.end_date|jformat:"%Y/%m/%d" }}</span></div>
  </div>
  {% empty %}<div class="alert-success">درخواستی نیست.</div>{% endfor %}
</div>
<a class="btn" href="{% url 'edit_requests' %}" style="margin-top:1rem;">مدیریت درخواست‌های ویرایش</a>
<a class="btn" href="{% url 'leave_requests' %}" style="margin-top:1rem;background:var(--color-muted);color:#fff;">مدیریت مرخصی‌ها</a>
{% endblock %}
