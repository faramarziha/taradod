{% extends "core/base_management.html" %}
{% load jformat %}
{% block title %}پروفایل عملکرد ماهانه{% endblock %}
{% block management_content %}
<h2 style="text-align:right;">
  <i class="fas fa-chart-line" style="margin-left:0.5rem;"></i> پروفایل عملکرد ماهانه
</h2>

<form method="get" class="report-form">
  {{ form.as_p }}
  <button type="submit" class="btn btn-primary">نمایش</button>
</form>

{% if report %}
<div class="dashboard-stats" style="margin-top:1rem;">
  <div class="dashboard-card">
    <h3>{{ report.required_minutes }}</h3>
    دقایق موظفی
  </div>
  <div class="dashboard-card">
    <h3>{{ report.actual_minutes }}</h3>
    دقایق حضور
  </div>
  <div class="dashboard-card">
    <h3>{{ report.overtime_minutes }}</h3>
    اضافه/کسری کار
  </div>
</div>

<div class="card" style="margin-top:1rem; padding:1rem; text-align:right;">
  <p>روزهای غیبت: {{ report.absent_days }}</p>
  <p>تعداد تأخیرها: {{ report.late_days }} ({{ report.late_minutes }} دقیقه)</p>
  <h4>مرخصی‌ها:</h4>
  <ul>
    {% for leave in report.leaves %}
    <li>{{ leave.start_date|jformat:"%Y/%m/%d" }} - {{ leave.end_date|jformat:"%Y/%m/%d" }}</li>
    {% empty %}
    <li>مرخصی ثبت نشده است.</li>
    {% endfor %}
  </ul>
</div>
{% endif %}
{% endblock %}

