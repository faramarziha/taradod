{% extends "core/base_management.html" %}
{% block title %}لیست کاربران{% endblock %}
{% block management_content %}
<h2 class="page-title">
  <i class="fas fa-list"></i> لیست کاربران
</h2>
<a class="btn" href="{% url 'user_add' %}" style="margin-bottom:1.2rem;">
  <i class="fas fa-user-plus" style="margin-left:0.5rem;"></i> افزودن کاربر جدید
</a>
<div class="table-responsive">
<table class="management-table responsive-table fade-in">
  <thead>
    <tr>
      <th class="hide-xs">ردیف</th>
      <th>کد پرسنلی</th>
      <th>نام</th>
      <th>نام خانوادگی</th>
      <th>نام کاربری</th>
      <th>ثبت چهره</th>
      <th>عملیات</th>
    </tr>
  </thead>
  <tbody>
    {% for u in users %}
      <tr>
        <td data-label="ردیف" class="hide-xs">{{ forloop.counter }}</td>
        <td data-label="کد پرسنلی">{{ u.personnel_code }}</td>
        <td data-label="نام">{{ u.first_name }}</td>
        <td data-label="نام خانوادگی">{{ u.last_name }}</td>
        <td data-label="نام کاربری">{{ u.username }}</td>
        <td data-label="ثبت چهره">
          {% if u.face_encoding %}
            <i class="fa fa-check-circle" style="color: var(--color-secondary);"></i>
          {% else %}
            <i class="fa fa-times-circle" style="color: var(--color-error);"></i>
          {% endif %}
        </td>
        <td data-label="عملیات">
          <a href="{% url 'user_update' u.pk %}" title="ویرایش"><i class="fas fa-edit"></i></a>
          <a href="{% url 'user_delete' u.pk %}" title="حذف"><i class="fas fa-trash-alt"></i></a>
        </td>
      </tr>
    {% empty %}
      <tr><td colspan="7">کاربری وجود ندارد</td></tr>
    {% endfor %}
  </tbody>
</table>
</div>
{% endblock %}
