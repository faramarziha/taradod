{% extends "core/base.html" %}
{% load jformat %}
{% block title %}گزارش کارکرد{% endblock %}
{% block content %}
<div class="card page page-md">
  <h2 class="page-title"><i class="fas fa-clock"></i> گزارش کارکرد {{ user.get_full_name }}</h2>
  <form method="get" class="form-grid" style="margin-bottom:1rem;">
    {% csrf_token %}
    {% for field in form %}
    <div class="form-group">{{ field.label_tag }}{{ field }}</div>
    {% endfor %}
    <div class="profile-actions"><button type="submit" class="btn">نمایش</button></div>
  </form>
  {% if rows %}
  <div class="table-responsive">
    <table class="management-table">
      <thead><tr><th>تاریخ</th><th>ورود</th><th>خروج</th><th>ساعت کار</th></tr></thead>
      <tbody>
        {% for r in rows %}
        <tr>
          <td>{{ r.date|jformat:"%Y/%m/%d" }}</td>
          <td>{{ r.in|default:"-" }}</td>
          <td>{{ r.out|default:"-" }}</td>
          <td>{{ r.hours }}</td>
        </tr>
        {% endfor %}
        <tr>
          <th colspan="3">جمع</th>
          <th>{{ total_hours }}</th>
        </tr>
      </tbody>
    </table>
  </div>
  {% endif %}
  <div class="profile-actions" style="margin-top:1rem;">
    <a class="btn" href="{% url 'user_profile' %}"><i class="fas fa-chevron-right" style="margin-left:0.4rem;"></i> بازگشت</a>
  </div>
</div>
{% endblock %}
{% block extra_js %}{{ form.media }}{% endblock %}
